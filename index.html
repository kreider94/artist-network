<!DOCTYPE>
<html>

<head>
    <script src="jquery-3.1.0.js"></script>
    <script type="text/javascript" src="main.css"></script>
    <script type="text/javascript" src="jquery-3.1.0.js"></script>
    <script type="text/javascript" src="app.js"></script>
    <script type="text/javascript" src="script.js"></script>
    <script type="text/javascript" src="mainuser.js"></script>
    <script type="text/javascript" src="sortdata.js"></script>
    <script type="text/javascript" src="graph.js"></script>
    <script type="text/javascript" src="newuser.js"></script>
    <script type="text/javascript" src="search.js"></script>
    <link rel="stylesheet" href="animated-search-box-pure-css/css/style.css">
    <script src="https://connect.soundcloud.com/sdk/sdk-3.1.1.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript" charset="utf-8" src="soundcloud.player.api.js"></script>
    <script src="d3.v3.min.js"></script>

    <meta charset="utf-8">
    <style>
        .links line {
            stroke: #999;
            stroke-opacity: 0.6;
        }


        .nodes circle {
            stroke: #fff;
            stroke-width: 1.5px;
        }



        .artbox {
            position: absolute;
            visibility: hidden;
            border: 1px solid black;
            width: 200px;
            height: 50px;
            text-align: right;
            padding: 3px;
            background-color: white;
            text-transform: capitalize;
            border-radius: 4px;
            padding: 5px;
            bottom: 0px;
            left: 0px;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
            -webkit-box-shadow: 1px 3px 60px 17px rgba(140, 133, 140, 0.69);
            -moz-box-shadow: 1px 3px 60px 17px rgba(140, 133, 140, 0.69);
            box-shadow: 1px 3px 60px 17px rgba(140, 133, 140, 0.69);
        }



        div>a {
            text-transform: capitalize;
            background-color: black;
            color: white;
            padding: 3px;
            border-radius: 3px;
            font-family: "Trebuchet MS", Helvetica, sans-serif;
            font-weight: bold;
        }



        #play {
            position: absolute;
            left: 5%;
            bottom: 5%;
        }



        .curruser {
            position: absolute;
            width: 150px;
            height: 150px;
            background-repeat: no-repeat;
            background-size: cover;
            top: 15px;
            right: 15px;
            border: 1px solid black;
            text-transform: capitalize;
            border-radius: 4px;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
            -webkit-box-shadow: 1px 3px 60px 17px rgba(140, 133, 140, 0.69);
            -moz-box-shadow: 1px 3px 60px 17px rgba(140, 133, 140, 0.69);
            box-shadow: 1px 3px 60px 17px rgba(140, 133, 140, 0.69);
        }



        body {
            background: -moz-linear-gradient(top, rgba(19, 239, 169, 1) 0%, rgba(18, 219, 163, 1) 13%, rgba(14, 160, 144, 0.79) 51%, rgba(9, 83, 119, 1) 100%);
            /* FF3.6-15 */
            background: -webkit-linear-gradient(top, rgba(19, 239, 169, 1) 0%, rgba(18, 219, 163, 1) 13%, rgba(14, 160, 144, 0.79) 51%, rgba(9, 83, 119, 1) 100%);
            /* Chrome10-25,Safari5.1-6 */
            background: linear-gradient(to bottom, rgba(19, 239, 169, 1) 0%, rgba(18, 219, 163, 1) 13%, rgba(14, 160, 144, 0.79) 51%, rgba(9, 83, 119, 1) 100%);
            /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
            filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#13efa9', endColorstr='#095377', GradientType=0);
            /* IE6-9 */
            copy
        }
    </style>
</head>

<body>

    <div class="artbox" id="artbox" width="200px" height="100px" border="1px">
        <a id="artname">ARTISTSNAME</a>
        <img id="exit" width="10px" height="10px" src="https://cdn2.iconfinder.com/data/icons/perfect-flat-icons-2/512/Close_delete_remove_exit_cross_x_button_error.png"></img>
        <img id="play" width="30px" height="30px" src="https://img.clipartfest.com/7d0af8798bf3f8e67bc76e81976bf444_play-button-clip-art-play-button-clipart_1000-1000.svg"></img>
    </div>

    <div class="curruser" id="curruser"></div>

    <div>

        <img id="login-sc" onclick="javascript:WaitForSoundcloud()" src="https://connect.soundcloud.com/2/btn-connect-sc-l.png">
        <form id="searchsc" class="my-form">
            <div align="center">
                <input class="button" id="searchbar" placeholder="Search..." value="" onclick="search()">
                <script src='http://use.edgefonts.net/amaranth.js'></script>
                <!--
            <input id="searchval" type="search" name="searchbar"></input>
            <input id="submit" type="button" value="search" onclick="search()"></input> -->
        </form>

        </script>
<!--
<object height="81" width="100%" id="yourPlayerId" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">
  <param name="movie" value="http://player.soundcloud.com/player.swf?url=http%3A%2F%2Fsoundcloud.com%2Fmatas%2Fhobnotropic&amp;enable_api=true&amp;object_id=74258373"></param>
  <param name="allowscriptaccess" value="always"></param>
  <embed allowscriptaccess="always" height="81" src="http://player.soundcloud.com/player.swf?url=http%3A%2F%2Fsoundcloud.com%2Fmatas%2Fhobnotropic&amp;enable_api=true&amp;object_id=74258373" type="application/x-shockwave-flash" width="100%" name="yourPlayerId"></embed>
</object> -->

<!-- <script>
    soundcloud.addEventListener('onPlayerReady', function(flashId, data) {
      // please refer to the documentation for the full list of available methods
      // btw, here the flash can be accessed too as 'this' like in 'this.api_play()'
      soundcloud.getPlayer(flashId).api_play();

      var flashvars = {
        enable_api: true,
        object_id: "74258373",
        url: "http://soundcloud.com/kirstin-reid"
      };
      var params = {
        allowscriptaccess: "always"
      };
      var attributes = {
        id: "74258373",
        name: "myPlayer"
      };
      swfobject.embedSWF("http://player.soundcloud.com/player.swf", "myContent", "81", "100%", "9.0.0","expressInstall.swf", flashvars, params, attributes);

    });
</script> -->


        <script type="text/javascript">
            var w = window,
                d = w.document,
                de = d.documentElement,
                db = d.body || d.getElementsByTagName('body')[0],
                x = w.innerWidth || de.clientWidth || db.clientWidth,
                y = w.innerHeight || de.clientHeight || db.clientHeight;

            function makeNetwork(graph) {
                $("svg").remove()
                var width = x,
                    height = y;
                var color = d3.scale.category20();
                var force = d3.layout.force()
                    .charge(-400)
                    .linkDistance(100)
                    .size([width, height])
                    .on("tick", tick);

                var svg = d3.select("body").append("svg")
                    .attr("id", "svg")
                    .attr("width", "100%")
                    .attr("height", "100%");

                var nodes = graph.nodes;
                var links = graph.links;
                console.log(nodes);
                console.log(links);
                force
                    .nodes(nodes)
                    .links(links)
                    .start();
                var link = svg.selectAll(".link")
                    .data(links)
                    .enter().append("line")
                    .attr("class", "link")
                    .style("stroke-width", function(d) {
                        console.log(d.target);
                        return d.target;
                    })
                    .style("stroke", function(d) {
                        return color(d.value)
                    });
                var gnodes = svg.selectAll('g.gnode') //('g.gnode')
                    .data(nodes)
                    .enter()
                    .append('g')
                    .classed('gnode', true)

                var defs = gnodes.append("defs").attr("id", "imgdefs")
                var image = gnodes.append("pattern")
                    .attr("id", "image")
                    .attr("height", 30)
                    .attr("width", 30)
                    .attr("x", "0")
                    .attr("y", "0")
                image.append("image")
                    .attr("height", function(n) {
                        return n.ranking * 30
                    })
                    .attr("width", function(n) {
                        return n.ranking * 30
                    })
                    .attr("xlink:href", function(d) {
                      var largeavatar = d.avatar.replace("large", "t500x500");
                        return largeavatar;
                    });
                var coordinates = [0, 0];
                var clickUser;
                var node = gnodes.append("circle")
                    .attr("r", function(d) {
                        return d.ranking / 2 * 30;
                    })
                    .attr("fill", "url(#image)")
                    .call(force.drag)
                    .on("click", function(user) {
                        document.getElementById('artbox').style.visibility = "visible";
                        coordinates = d3.mouse(svg.node());
                        var x = coordinates[0];
                        var y = coordinates[1];
                        var a = document.getElementById("artbox");ÃŸ
                        a.style.position = "absolute";
                        a.style.left = x + 'px';
                        a.style.top = y + 'px';
                        document.getElementById("artname").innerHTML = user.title;
                        document.getElementById('artname').onclick = function() {
                            document.getElementById("searchbar").value = user.permalink;
                            document.getElementById('artbox').style.visibility = "hidden"
                            search();
                            document.getElementById('svg').onclick = function() {
                                document.getElementById('artbox').style.visibility = "hidden";
                            };
                        }
                        document.getElementById('exit').onclick = function() {
                            document.getElementById('artbox').style.visibility = "hidden";
                        };
                    });

                function tick() {
                    link.attr("x1", function(d) {
                            return d.source.x;
                        })
                        .attr("y1", function(d) {
                            return d.source.y;
                        })
                        .attr("x2", function(d) {
                            return d.target.x;
                        })
                        .attr("y2", function(d) {
                            return d.target.y;
                        });
                    gnodes.attr("transform", function(d) {
                        return 'translate(' + [d.x, d.y] + ')';ÃŸ
                    });
                };

                function dragstarted(d) {
                    if (!d3.event.active) simulation.alphaTarget(0.3).restart();
                    d.fx = d.x;
                    d.fy = d.y;
                }

                function dragged(d) {
                    d.fx = d3.event.x;
                    d.fy = d3.event.y;
                }

                function dragended(d) {
                    if (!d3.event.active) simulation.alphaTarget(0);
                    d.fx = null;
                    d.fy = null;
                }
            }
        </script>

</html>
</body>
